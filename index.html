<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Birthday Star - Wikipedia</title>

<script src="https://cdn.tailwindcss.com"></script>

<style>
@import url('https://fonts.googleapis.com/css2?family=Abril+Fatface&family=Cinzel:wght@400;700&family=Crimson+Text:ital,wght@0,400;0,600;0,700;1,400;1,600&family=Special+Elite&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;700&family=Noto+Serif:wght@400;700&display=swap');

:root {
    --ink-black: #1a1a1a;
    --paper-white: #f4f1ea;
    --accent-red: #8b0000;
    --wiki-bg: #f6f6f6;
    --wiki-border: #a7d7f9;
    --wiki-link: #3366cc;
    --wiki-text: #202122;
}

body {
    transition: background-color 0.5s ease;
}

/* ================= MOBILE STYLES (< 1024px) ================= */
@media (max-width: 1023px) {
    body {
        font-family: 'Crimson Text', serif;
        background: url('https://images.unsplash.com/photo-1585314062340-f1a5a7c9328d?q=80&w=2070&auto=format&fit=crop') no-repeat center center/cover fixed;
        min-height: 100vh;
        color: var(--ink-black);
        padding-top: 5rem; 
        overflow-x: hidden;
    }

    body::after {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.1'/%3E%3C/svg%3E");
        pointer-events: none;
        z-index: 9999;
        opacity: 0.4;
        mix-blend-mode: multiply;
    }

    body.navs-open {
        padding-left: 80px; 
        padding-right: 80px;
    }
}

/* ================= DESKTOP STYLES (>= 1024px) ================= */
@media (min-width: 1024px) {
    body {
        background-color: var(--wiki-bg);
        font-family: 'Noto Sans', sans-serif;
        color: var(--wiki-text);
        padding: 0;
        overflow-y: scroll;
    }
    body::after { display: none; }
    /* Ensure symbols are hidden via CSS as a backup */
    .float-symbol { display: none !important; }
}

/* Typography & Components */
.font-newspaper-title { font-family: 'Abril Fatface', cursive; letter-spacing: 0.05em; font-weight: 400; }
.font-serif-display { font-family: 'Cinzel', serif; font-weight: 700; }
.font-newspaper-body { font-family: 'Crimson Text', serif; font-size: 1.1rem; line-height: 1.6; }
.font-typewriter { font-family: 'Special Elite', monospace; }

/* Desktop Wiki Specifics */
.mw-body {
    background-color: #ffffff;
    border: 1px solid #a7d7f9;
    border-right-width: 0;
    margin-top: -1px;
    padding: 1.25em 1.5em 1.5em 1.5em;
}
.firstHeading {
    border-bottom: 1px solid #a2a9b1;
    font-family: 'Linux Libertine','Georgia','Times','serif';
    font-size: 1.8em;
    font-weight: normal;
    padding-bottom: 0.25em;
    margin-bottom: 0.25em;
}
.mw-headline {
    font-family: 'Linux Libertine','Georgia','Times','serif';
    font-weight: bold;
    font-size: 1.2em;
    padding-top: 0.5em;
    margin-top: 1em;
    border-bottom: 1px solid #a2a9b1;
    width: 100%;
    display: block;
}
.toc {
    background-color: #f8f9fa;
    border: 1px solid #a2a9b1;
    padding: 10px;
    display: inline-block;
    min-width: 200px;
    margin-bottom: 1em;
}
.toc-title { font-weight: bold; text-align: center; margin-bottom: 0.5em; }
.toc ul { list-style: none; padding-left: 0; }
.toc li { font-size: 0.9em; margin-bottom: 0.2em; }
.toc a { color: #0645ad; text-decoration: none; }
.toc a:hover { text-decoration: underline; }

/* Bouncy Button - Mobile/Interactive */
.bouncy-button {
    background-color: transparent;
    color: var(--ink-black);
    border-radius: 2px;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    font-family: 'Cinzel', serif;
    font-weight: 700;
    font-size: 0.9rem;
    border: 2px solid var(--ink-black);
    box-shadow: 4px 4px 0px var(--ink-black);
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    padding: 0.75rem 1.5rem;
    cursor: pointer;
}
.bouncy-button:hover { transform: translate(2px, 2px); box-shadow: 2px 2px 0px var(--ink-black); background-color: rgba(26, 26, 26, 0.05); }
.bouncy-button:active { transform: translate(4px, 4px); box-shadow: none; }
.bouncy-button:disabled { opacity: 0.5; cursor: not-allowed; box-shadow: none; transform: translate(2px, 2px); }

/* Tic Tac Toe */
#tictactoe-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    grid-template-rows: repeat(3, 1fr);
    width: 240px; 
    height: 240px;
    margin: 2rem auto;
    border: 3px solid var(--ink-black);
    gap: 0;
    background: transparent;
}
.cell {
    display: flex; align-items: center; justify-content: center;
    font-size: 3rem; font-weight: 400; cursor: pointer;
    border: 1px solid var(--ink-black); transition: background-color 0.2s;
    color: var(--ink-black); font-family: 'Special Elite', monospace; line-height: 1;
}
.cell:hover:not(:empty) { background-color: rgba(0,0,0,0.03); }
.cell.O { color: var(--accent-red); }
.cell:nth-child(3n) { border-right: none; }
.cell:nth-child(n + 7) { border-bottom: none; }
.cell:nth-child(3n-2) { border-left: none; }
.cell:nth-child(n + 1):nth-child(-n + 3) { border-top: none; }

/* Animations */
@keyframes float-up {
    0% { transform: translateY(0) scale(1) rotate(0deg); opacity: 0; }
    20% { opacity: 0.6; } 80% { opacity: 0.6; }
    100% { transform: translateY(-100vh) scale(1.2) rotate(360deg); opacity: 0; }
}
.float-symbol {
    position: fixed; bottom: -50px; font-size: 24px;
    font-family: 'Special Elite', monospace; color: #2a2a2a; 
    pointer-events: none; animation: float-up 12s infinite linear;
    z-index: 10; opacity: 0.7;
}

/* Nav */
.nav-panel { transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94); position: fixed; z-index: 200; }
#leftNav, #rightNav { width: 60px; }
.nav-link:hover { background-color: rgba(255, 255, 255, 0.1); transform: scale(1.05); }

/* Fireworks */
.fireworks-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 100; }
.final-display-container {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    z-index: 101; pointer-events: none; color: white; 
    text-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
    opacity: 0; transition: opacity 2s ease-in-out; background-color: rgba(0, 0, 0, 0.95); 
}

/* Desktop Sidebar Links */
.wiki-sidebar-link { display: block; padding: 6px 10px; color: #0645ad; text-decoration: none; font-size: 0.85rem; }
.wiki-sidebar-link:hover { text-decoration: underline; }

/* Wiki Components */
.wiki-logo {
    width: 135px; height: 135px;
    background: url('https://upload.wikimedia.org/wikipedia/en/8/80/Wikipedia-logo-v2.svg') no-repeat center center;
    background-size: contain; margin: 0 auto 1em auto;
}
.wiki-infobox {
    float: right; clear: right; width: 300px; margin: 0 0 1em 1em;
    border: 1px solid #a2a9b1; background-color: #f8f9fa;
    padding: 0.2em; font-size: 88%; line-height: 1.5em;
}
.wiki-infobox-header { background-color: #b0c4de; text-align: center; font-weight: bold; padding: 0.2em; }
.wiki-infobox-image { padding: 10px 0; text-align: center; }
.wiki-infobox-data { display: flex; justify-content: space-between; padding: 4px 8px; border-bottom: 1px solid #eaecf0; }

.wiki-tab {
    padding: 8px 16px; border: 1px solid #a7d7f9; border-bottom: none;
    background: #fff; margin-right: 4px; font-size: 0.85rem; color: #0645ad;
}
.wiki-tab.active {
    font-weight: bold; color: #000; background: white;
    padding-bottom: 9px; margin-bottom: -1px; z-index: 10; position: relative;
}
</style>
</head>

<body>

<!-- Mobile Navs -->
<button id="navToggle" class="fixed top-4 left-4 z-[210] p-3 bg-[#1a1a1a] text-[#f4f1ea] rounded-full shadow-xl hover:bg-black transition-transform duration-200 ease-in-out bouncy-button border-none lg:hidden" style="padding: 0.75rem; border-radius: 9999px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3);">
    <svg id="navToggleIcon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-8 6h8"></path></svg>
    <svg id="navToggleX" class="w-6 h-6 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
</button>

<nav id="topNav" class="nav-panel fixed top-0 left-0 right-0 h-16 bg-[#1a1a1a] text-[#f4f1ea] shadow-xl flex items-center justify-center space-x-6 -translate-y-full border-b-2 border-[#f4f1ea]/10 lg:hidden">
    <a href="index.html" class="nav-link px-3 py-2 text-sm font-newspaper-body tracking-widest uppercase">Home</a>
    <a href="Special.html" class="nav-link px-3 py-2 text-sm font-newspaper-body tracking-widest uppercase">Special</a>
    <a href="letter.html" class="nav-link px-3 py-2 text-sm font-newspaper-body tracking-widest uppercase">Letter</a>
</nav>
<nav id="bottomNav" class="nav-panel fixed bottom-0 left-0 right-0 h-16 bg-[#1a1a1a] text-[#f4f1ea] shadow-xl flex items-center justify-center space-x-6 translate-y-full border-t-2 border-[#f4f1ea]/10 lg:hidden">
    <a href="anatomy.html" class="nav-link px-3 py-2 text-sm font-newspaper-body tracking-widest uppercase">Anatomy</a>
    <a href="chat.html" class="nav-link px-3 py-2 text-sm font-newspaper-body tracking-widest uppercase">Heaven</a>
    <a href="you.html" class="nav-link px-3 py-2 text-sm font-newspaper-body tracking-widest uppercase">You</a>
</nav>
<nav id="leftNav" class="nav-panel fixed left-0 top-0 bottom-0 bg-[#1a1a1a] text-[#f4f1ea] shadow-xl flex flex-col items-center space-y-6 overflow-y-auto py-20 -translate-x-full border-r-2 border-[#f4f1ea]/10 lg:hidden">
    <a href="Diary.html" class="nav-link p-2 text-xs font-newspaper-body tracking-widest uppercase">Diary</a>
    <a href="Universe.html" class="nav-link p-2 text-xs font-newspaper-body tracking-widest uppercase">Universe</a>
    <a href="Box.html" class="nav-link p-2 text-xs font-newspaper-body tracking-widest uppercase">Box</a>
    <a href="color.html" class="nav-link p-2 text-xs font-newspaper-body tracking-widest uppercase">Color</a>
    <a href="Teacher.html" class="nav-link p-2 text-xs font-newspaper-body tracking-widest uppercase">Teacher</a>
    <a href="The_River.html" class="nav-link p-2 text-xs font-newspaper-body tracking-widest uppercase">River</a>
    <a href="Mountain.html" class="nav-link p-2 text-xs font-newspaper-body tracking-widest uppercase">Mountain</a>
    <a href="Paper_Star.html" class="nav-link p-2 text-xs font-newspaper-body tracking-widest uppercase">Paper Star</a>
    <a href="Carttoon.html" class="nav-link p-2 text-xs font-newspaper-body tracking-widest uppercase">Cartoon</a>
    <a href="Santa.html" class="nav-link p-2 text-xs font-newspaper-body tracking-widest uppercase">Santa</a>
    <a href="Cloud.html" class="nav-link p-2 text-xs font-newspaper-body tracking-widest uppercase">Cloud</a>
    <a href="Ink.html" class="nav-link p-2 text-xs font-newspaper-body tracking-widest uppercase">Ink</a>
    <a href="Butterfly.html" class="nav-link p-2 text-xs font-newspaper-body tracking-widest uppercase">Butterfly</a>
    <a href="Weather.html" class="nav-link p-2 text-xs font-newspaper-body tracking-widest uppercase">Weather</a>
</nav>
<nav id="rightNav" class="nav-panel fixed right-0 top-0 bottom-0 bg-[#1a1a1a] text-[#f4f1ea] shadow-xl flex flex-col items-center space-y-6 overflow-y-auto py-20 translate-x-full border-l-2 border-[#f4f1ea]/10 lg:hidden">
    <a href="Skill.html" class="nav-link p-2 text-xs font-newspaper-body tracking-widest uppercase">Skill</a>
    <a href="Msg.html" class="nav-link p-2 text-xs font-newspaper-body tracking-widest uppercase">Message</a>
    <a href="21_Wish.html" class="nav-link p-2 text-xs font-newspaper-body tracking-widest uppercase">21 Door</a>
    <a href="Cake.html" class="nav-link p-2 text-xs font-newspaper-body tracking-widest uppercase">Cake</a>
    <a href="Periodik_table.html" class="nav-link p-2 text-xs font-newspaper-body tracking-widest uppercase">Table</a>
    <a href="Presence.html" class="nav-link p-2 text-xs font-newspaper-body tracking-widest uppercase">Presence</a>
    <a href="Concept.html" class="nav-link p-2 text-xs font-newspaper-body tracking-widest uppercase">Concept</a>
    <a href="Calender.html" class="nav-link p-2 text-xs font-newspaper-body tracking-widest uppercase">Calender</a>
    <a href="Perspective.html" class="nav-link p-2 text-xs font-newspaper-body tracking-widest uppercase">View</a>
    <a href="Spotlight.html" class="nav-link p-2 text-xs font-newspaper-body tracking-widest uppercase">Spotlight</a>
    <a href="Room.html" class="nav-link p-2 text-xs font-newspaper-body tracking-widest uppercase">Room</a>
    <a href="Radio.html" class="nav-link p-2 text-xs font-newspaper-body tracking-widest uppercase">Radio</a>
    <a href="Food.html" class="nav-link p-2 text-xs font-newspaper-body tracking-widest uppercase">Food</a>
    <a href="Music.html" class="nav-link p-2 text-xs font-newspaper-body tracking-widest uppercase">Music</a>
</nav>

<!-- Mobile View Wrapper -->
<div id="mobile-view-wrapper" class="lg:hidden">
    <div class="flex items-center justify-center min-h-[80vh] w-full px-4">
        <div id="main-card" class="w-full max-w-md bg-[#f4f1ea] border-2 border-black shadow-[8px_8px_0px_rgba(0,0,0,1)] p-6 text-center z-20 relative transition-all duration-1000 ease-in-out transform scale-100 opacity-100 my-8">
            <div class="border-b-2 border-black pb-3 mb-6">
                <h1 class="font-newspaper-title text-4xl text-black">Puzzle Corner</h1>
                <div class="flex justify-between text-[11px] font-typewriter uppercase tracking-[0.2em] mt-2">
                    <span>Daily Edition</span>
                    <span>Vol. 21</span>
                </div>
            </div>
            <h2 id="card-title-header" class="text-3xl font-newspaper-title text-black mb-6 uppercase tracking-wide leading-tight"></h2>
            <section id="card-content" class="space-y-4 p-1 font-newspaper-body text-lg leading-relaxed text-left text-black">
                <!-- Mobile card content goes here -->
            </section>
            <div class="flex justify-center w-full mt-8 pt-6 border-t border-black"> 
                <button id="next-button" class="bouncy-button">Start Journey</button>
            </div>
        </div>
    </div>
</div>

<!-- Desktop View Wrapper (Single Scrollable Page) -->
<div id="desktop-wiki-view" class="hidden lg:flex w-full min-h-screen bg-[#f6f6f6] text-[#202122]">
    
    <!-- Sidebar -->
    <aside class="w-44 pt-6 pl-4 pr-2 border-r border-transparent">
        <div class="wiki-logo"></div>
        
        <!-- Main Nav -->
        <div class="mb-6">
            <h3 class="text-xs text-[#54595d] border-b border-[#eaecf0] mb-2 pb-1 font-normal uppercase tracking-wide">Main</h3>
            <nav class="space-y-1">
                <a href="index.html" class="wiki-sidebar-link">Home</a>
                <a href="Special.html" class="wiki-sidebar-link">Special</a>
                <a href="letter.html" class="wiki-sidebar-link">Letter</a>
                <a href="anatomy.html" class="wiki-sidebar-link">Anatomy</a>
                <a href="chat.html" class="wiki-sidebar-link">Heaven</a>
                <a href="you.html" class="wiki-sidebar-link">You</a>
            </nav>
        </div>

        <!-- Chronicles (Left Nav Items) -->
        <div class="mb-6">
            <h3 class="text-xs text-[#54595d] border-b border-[#eaecf0] mb-2 pb-1 font-normal uppercase tracking-wide">Chronicles</h3>
            <nav class="space-y-1">
                <a href="Diary.html" class="wiki-sidebar-link">Diary</a>
                <a href="Universe.html" class="wiki-sidebar-link">Universe</a>
                <a href="Box.html" class="wiki-sidebar-link">Box</a>
                <a href="color.html" class="wiki-sidebar-link">Color</a>
                <a href="Teacher.html" class="wiki-sidebar-link">Teacher</a>
                <a href="The_River.html" class="wiki-sidebar-link">River</a>
                <a href="Mountain.html" class="wiki-sidebar-link">Mountain</a>
                <a href="Paper_Star.html" class="wiki-sidebar-link">Paper Star</a>
                <a href="Carttoon.html" class="wiki-sidebar-link">Cartoon</a>
                <a href="Santa.html" class="wiki-sidebar-link">Santa</a>
                <a href="Cloud.html" class="wiki-sidebar-link">Cloud</a>
                <a href="Ink.html" class="wiki-sidebar-link">Ink</a>
                <a href="Butterfly.html" class="wiki-sidebar-link">Butterfly</a>
                <a href="Weather.html" class="wiki-sidebar-link">Weather</a>
            </nav>
        </div>

        <!-- Artifacts (Right Nav Items) -->
        <div class="mb-6">
            <h3 class="text-xs text-[#54595d] border-b border-[#eaecf0] mb-2 pb-1 font-normal uppercase tracking-wide">Artifacts</h3>
            <nav class="space-y-1">
                <a href="Skill.html" class="wiki-sidebar-link">Skill</a>
                <a href="Msg.html" class="wiki-sidebar-link">Message</a>
                <a href="21_Wish.html" class="wiki-sidebar-link">21 Door</a>
                <a href="Cake.html" class="wiki-sidebar-link">Cake</a>
                <a href="Periodik_table.html" class="wiki-sidebar-link">Table</a>
                <a href="Presence.html" class="wiki-sidebar-link">Presence</a>
                <a href="Concept.html" class="wiki-sidebar-link">Concept</a>
                <a href="Calender.html" class="wiki-sidebar-link">Calender</a>
                <a href="Perspective.html" class="wiki-sidebar-link">View</a>
                <a href="Spotlight.html" class="wiki-sidebar-link">Spotlight</a>
                <a href="Room.html" class="wiki-sidebar-link">Room</a>
                <a href="Radio.html" class="wiki-sidebar-link">Radio</a>
                <a href="Food.html" class="wiki-sidebar-link">Food</a>
                <a href="Music.html" class="wiki-sidebar-link">Music</a>
            </nav>
        </div>
    </aside>

    <!-- Main Content Area -->
    <main class="flex-1 p-6 relative">
        
        <!-- Wiki Header Links -->
        <div class="flex justify-end border-b border-[#a7d7f9] mb-[-1px]">
            <div class="flex space-x-1">
                <span class="text-xs pt-2 px-2">Not logged in</span>
                <a href="#" class="text-xs text-[#0645ad] pt-2 px-2 hover:underline">Talk</a>
                <a href="#" class="text-xs text-[#0645ad] pt-2 px-2 hover:underline">Contributions</a>
                <a href="#" class="text-xs text-[#0645ad] pt-2 px-2 hover:underline">Create account</a>
                <a href="#" class="text-xs text-[#0645ad] pt-2 px-2 hover:underline">Log in</a>
            </div>
        </div>

        <!-- Wiki Tabs -->
        <div class="flex mt-8 items-end border-b border-[#a7d7f9]">
            <div class="wiki-tab active">Article</div>
            <div class="wiki-tab">Talk</div>
            <div class="flex-1"></div>
            <div class="wiki-tab active">Read</div>
            <div class="wiki-tab">Edit</div>
            <div class="wiki-tab">View history</div>
            <div class="relative ml-4 mb-1">
                <input type="text" placeholder="Search Wikipedia" class="border border-[#a2a9b1] px-2 py-1 text-sm w-48 shadow-inner">
                <button class="absolute right-0 top-0 h-full px-2 text-[#54595d] font-bold">üîç</button>
            </div>
        </div>

        <!-- Wiki Content Container -->
        <div class="mw-body shadow-sm">
            
            <h1 class="firstHeading">The Birthday Star (2025)</h1>
            <div class="text-[0.85em] mb-4">From Wikipedia, the free encyclopedia</div>

            <!-- Infobox -->
            <div class="wiki-infobox">
                <div class="wiki-infobox-header">The Birthday Star</div>
                <div class="wiki-infobox-image">
                    <img src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?q=80&w=300" alt="Star Profile" class="w-full h-auto border border-gray-300 p-1">
                    <div class="text-xs mt-1">Fig 1. The subject of the celebration</div>
                </div>
                <div class="wiki-infobox-data"><span class="font-bold">Born</span><span>October 24, 2025</span></div>
                <div class="wiki-infobox-data"><span class="font-bold">Status</span><span>Most Loved</span></div>
                <div class="wiki-infobox-data"><span class="font-bold">Occupation</span><span>Being Amazing</span></div>
                <div class="wiki-infobox-data"><span class="font-bold">Known For</span><span>Kindness, Silence</span></div>
            </div>

            <!-- Introduction -->
            <div id="wiki-full-article" class="pr-4 max-w-4xl text-justify text-[#202122] font-sans text-[0.95rem] leading-[1.6]">
                <p class="mb-4">
                    <b>The Birthday Star</b> is a celestial phenomenon observed annually on October 24. It is characterized by an increase in global happiness levels and a series of mysterious puzzles that unlock heartfelt messages.
                </p>
                <p class="mb-4">
                    The phenomenon was first documented in the <b>London Edition</b> of the daily chronicle. Observers note that the subject possesses a rare quality of "shining bright" regardless of atmospheric conditions.
                </p>

                <!-- Table of Contents -->
                <div class="toc">
                    <div class="toc-title">Contents <span class="font-normal text-xs">[<a href="#" class="text-[#0645ad]">hide</a>]</span></div>
                    <ul>
                        <li><a href="#section-0">1 Introduction</a></li>
                        <li><a href="#section-1">2 The Challenge of Destiny</a></li>
                        <li><a href="#section-2">3 Mathematical Anomalies</a></li>
                        <li><a href="#section-3">4 Linguistic Analysis</a></li>
                        <li><a href="#section-4">5 Public Reception</a></li>
                        <li><a href="#section-5">6 The Manuscript</a></li>
                        <li><a href="#section-ref">7 References</a></li>
                    </ul>
                </div>

                <!-- Dynamic Content Will Be Injected Here via JS -->
                <div id="wiki-sections-container"></div>

                <!-- References / Final Footer -->
                <h2 id="section-ref" class="mw-headline">7. References <span class="text-sm font-normal ml-2">[<a href="#" class="text-[#0645ad]">edit</a>]</span></h2>
                <div class="text-sm mt-2 mb-8">
                    1. <i>The Book of Life</i>, Vol 21, Page 365.<br>
                    2. <i>Universal Truths</i>, Chapter: "You are my whole universe".
                </div>
            </div>
        </div>
    </main>
</div>

<!-- Shared Final Elements -->
<canvas id="fireworks-canvas" class="fireworks-canvas hidden"></canvas>
<div id="final-display-elements" class="final-display-container hidden">
    <div class="flex flex-col items-center justify-center gap-6 w-full h-full p-4">
        <div id="final-photo-container" class="w-60 h-60 md:w-80 md:h-80 bg-gray-200 rounded-none overflow-hidden shadow-[12px_12px_0px_#f4f1ea] border-4 border-[#f4f1ea] flex items-center justify-center text-black text-center text-lg italic font-newspaper-body grayscale contrast-125 sepia-[.2]">
            YOUR FINAL PHOTO HERE
        </div>
        <div id="final-message-box" class="text-center mt-8">
            <h1 class="font-newspaper-title text-5xl md:text-8xl text-[#f4f1ea] tracking-wider mb-4">HAPPY BIRTHDAY!</h1>
            <h2 class="font-serif-display text-2xl md:text-4xl mt-2 text-[#f4f1ea] italic tracking-wide">You are my whole universe.</h2>
        </div>
    </div>
</div>

<script>
let currentCardIndex = 0;
let symbolInterval; 
let mainCard;

const cards = [
    { 
        title: "Editorial Note",
        desktopTitle: "1. Introduction",
        mobileHtml: `
            <div class="space-y-6 text-left">
                <p class="text-xl font-bold font-serif-display text-black uppercase border-b-2 border-black pb-2 inline-block tracking-widest">A Special Delivery</p>
                <div class="text-lg text-black font-newspaper-body text-justify leading-relaxed">
                    <p class="mb-4"><span class="float-left text-6xl font-newspaper-title mr-3 leading-none mt-[-8px]">B</span>efore the grand finale, there are few special cards waiting just for you.</p>
                    <p>Each card holds a small message, a riddle, or a challenge that you need to complete to unlock the next one. Only when you complete the final card will the surprise be revealed.</p>
                    <p class="mt-6 italic font-serif text-gray-800 border-l-2 border-black pl-4">Tap below to start your personalized adventure. Shine bright.</p>
                </div>
            </div>
        `,
        wikiHtml: `
            <div class="space-y-4 text-left">
                <p class="text-lg font-newspaper-body text-justify leading-relaxed">
                    <span class="float-left text-5xl font-newspaper-title mr-2 leading-none mt-[-4px]">B</span>efore the grand finale, there are few special cards waiting just for you. Each card holds a small message, a riddle, or a challenge that you need to complete to unlock the next one. Only when you complete the final card will the surprise be revealed.
                </p>
                <p class="italic text-gray-700 border-l-2 border-[#a2a9b1] pl-4">Tap below to start your personalized adventure. Shine bright.</p>
            </div>
        `,
        buttonText: "Turn Page",
        callback: null 
    },
    { 
        title: "Puzzle: Destiny",
        desktopTitle: "2. The Challenge of Destiny",
        mobileHtml: `
            <div class="flex flex-col items-center">
                <p class="text-lg font-newspaper-body italic mb-6">You play as 'X'. Win this simple game to open the first door.</p>
                <div class="relative p-2 border-2 border-black bg-white shadow-lg">
                    <div id="tictactoe-grid" class="mx-auto my-0">
                        <div class="cell" data-index="0"></div><div class="cell" data-index="1"></div><div class="cell" data-index="2"></div>
                        <div class="cell" data-index="3"></div><div class="cell" data-index="4"></div><div class="cell" data-index="5"></div>
                        <div class="cell" data-index="6"></div><div class="cell" data-index="7"></div><div class="cell" data-index="8"></div>
                    </div>
                </div>
                <div class="flex flex-col items-center mt-6">
                    <p id="game-status" class="text-xl font-bold font-serif-display uppercase tracking-widest">Your move</p>
                    <button id="restart-game-btn" class="hidden mt-2 bouncy-button px-4 py-2 text-xs" onclick="initializeTicTacToe()">Try Again</button>
                </div>
                <p id="card-msg-1" class="text-2xl font-newspaper-body italic mt-4 hidden text-[#8b0000]">"You have won my heart."</p>
            </div>
        `,
        wikiHtml: `
            <div class="flex flex-col items-start">
                <p class="mb-4">This section represents the interactive component of the celebration. You play as 'X'.</p>
                <div class="relative p-2 border border-gray-300 bg-white mb-4">
                    <div id="tictactoe-grid" class="mx-auto my-0">
                        <div class="cell" data-index="0"></div><div class="cell" data-index="1"></div><div class="cell" data-index="2"></div>
                        <div class="cell" data-index="3"></div><div class="cell" data-index="4"></div><div class="cell" data-index="5"></div>
                        <div class="cell" data-index="6"></div><div class="cell" data-index="7"></div><div class="cell" data-index="8"></div>
                    </div>
                </div>
                <div class="w-full flex flex-col items-center">
                    <p id="game-status" class="font-bold text-gray-700">Your move</p>
                    <button id="restart-game-btn" class="hidden mt-2 px-3 py-1 bg-gray-200 border border-gray-400 text-sm hover:bg-gray-300" onclick="initializeTicTacToe()">Try Again</button>
                </div>
                <p id="card-msg-1" class="text-lg italic mt-4 hidden text-[#8b0000]">"You have won my heart."</p>
            </div>
        `,
        buttonText: "Next Section",
        callback: initializeTicTacToe,
        isLocked: true 
    },
    { 
        title: "The Number Puzzle",
        desktopTitle: "3. Mathematical Anomalies",
        mobileHtml: `
            <div class="space-y-6 text-center">
                <p class="text-2xl font-bold font-serif-display">What is this called?</p>
                <p class="text-5xl font-newspaper-title tracking-widest border-y-2 border-black py-4 my-4">(12.99999)</p>
                <div class="flex justify-center">
                     <button class="bouncy-button px-6 py-2 text-xs" onclick="document.getElementById('card-msg-2').classList.remove('hidden'); unlockCurrentCard()">Reveal Answer</button>
                </div>
                <p id="card-msg-2" class="text-xl font-newspaper-body mt-6 hidden transition-all duration-500">
                    <span class="text-3xl font-bold font-serif-display block mb-2">13</span> (tera) hone laga huu
                </p>
            </div>
        `,
        wikiHtml: `
            <div class="space-y-4">
                <p>Researchers have discovered a unique numerical anomaly:</p>
                <div class="p-4 bg-[#f8f9fa] border border-[#eaecf0] text-center font-mono text-xl">
                    (12.99999)
                </div>
                <p>What is this value colloquially known as?</p>
                <div class="flex justify-start">
                     <button class="px-4 py-2 bg-[#f8f9fa] border border-[#a2a9b1] text-sm hover:bg-[#e2e2e2]" onclick="document.getElementById('card-msg-2').classList.remove('hidden')">Reveal Answer</button>
                </div>
                <p id="card-msg-2" class="text-lg mt-4 hidden">
                    <span class="font-bold">13</span> (tera) hone laga huu. <span class="italic text-sm text-gray-600">- A common pun involving the number 13 (tera) in Hindi.</span>
                </p>
            </div>
        `,
        buttonText: "Next Section",
        callback: null,
        isLocked: true 
    },
    { 
        title: "The Word Riddle",
        desktopTitle: "4. Linguistic Analysis",
        mobileHtml: `
            <div class="space-y-6 text-center">
                <p class="text-2xl font-bold font-serif-display">Do you know what will last forever in this world?</p>
                 <div class="flex justify-center mt-6">
                    <button class="bouncy-button px-6 py-2 text-xs" onclick="document.getElementById('card-msg-3').classList.remove('hidden'); unlockCurrentCard()">Show Me The Hint</button>
                </div>
                <p id="card-msg-3" class="text-xl font-newspaper-body italic mt-8 hidden border-l-4 border-black pl-4 text-left">
                    On your keyboard look at the letters between Y and O.
                </p>
            </div>
        `,
        wikiHtml: `
            <div class="space-y-4">
                <p>A query regarding permanence in the physical realm:</p>
                <blockquote class="border-l-4 border-[#eaecf0] pl-4 italic bg-[#f8f9fa] py-2">
                    "Do you know what will last forever in this world?"
                </blockquote>
                 <div class="flex justify-start mt-2">
                    <button class="px-4 py-2 bg-[#f8f9fa] border border-[#a2a9b1] text-sm hover:bg-[#e2e2e2]" onclick="document.getElementById('card-msg-3').classList.remove('hidden')">Show Hint</button>
                </div>
                <p id="card-msg-3" class="text-lg italic mt-4 hidden text-gray-800">
                    Observation: On standard QWERTY keyboards, the keys between 'Y' and 'O' represent the answer.
                </p>
            </div>
        `,
        buttonText: "I Know The Answer",
        callback: null,
        isLocked: true
    },
    { 
        title: "Opinion Poll",
        desktopTitle: "5. Public Reception",
        mobileHtml: `
            <div class="space-y-6 text-center">
                <p class="text-xl font-newspaper-body font-bold leading-relaxed">Which one of these single words resonates with your soul today?</p>
                <div class="flex justify-center gap-6 mt-6">
                    <button class="bouncy-button px-8 py-3" onclick="chooseWord('serenity')">Serenity</button>
                    <button class="bouncy-button px-8 py-3" onclick="chooseWord('radiant')">Radiant</button>
                </div>
                <p id="word-status" class="text-lg font-newspaper-body italic mt-8 hidden text-gray-800">
                    A beautiful choice, just like you. The card is now unlocked.
                </p>
            </div>
        `,
        wikiHtml: `
            <div class="space-y-4">
                <p>Which one of these descriptors resonates with the subject's soul today?</p>
                <div class="flex gap-4 mt-2">
                    <button class="px-4 py-2 bg-[#f8f9fa] border border-[#a2a9b1] text-sm hover:bg-[#e2e2e2]" onclick="chooseWord('serenity')">Serenity</button>
                    <button class="px-4 py-2 bg-[#f8f9fa] border border-[#a2a9b1] text-sm hover:bg-[#e2e2e2]" onclick="chooseWord('radiant')">Radiant</button>
                </div>
                <p id="word-status" class="text-lg italic mt-4 hidden text-gray-800">
                    A beautiful choice.
                </p>
            </div>
        `,
        buttonText: "Almost There",
        callback: initializeWordCard,
        isLocked: true 
    },
    { 
        title: "Access Granted",
        desktopTitle: null, 
        mobileHtml: `
            <div class="space-y-6 text-center">
                <p class="text-5xl font-newspaper-title mb-6">Congratulations</p>
                <div class="border-t-2 border-b-2 border-black py-8">
                    <p class="text-xl font-newspaper-body leading-relaxed">You successfully completed all five challenges.</p>
                    <p class="text-xl font-newspaper-body mt-4 leading-relaxed">You have unlocked the most important message of all, prepared with every ounce of my heart.</p>
                </div>
                <p class="text-xs font-typewriter uppercase tracking-[0.2em] mt-6 font-bold">Click below to read the cover story</p>
            </div>
        `,
        wikiHtml: `...`,
        buttonText: "Read Cover Story",
        callback: () => { cards[5].isLocked = false; }
    },
    { 
        title: "Cover Story: The Wish",
        desktopTitle: "6. The Manuscript",
        mobileHtml: `
            <div class="space-y-4 text-center h-full flex flex-col">
                <div class="text-base font-newspaper-body leading-relaxed text-justify p-2 rounded-none pr-4 lg:grid lg:grid-cols-2 lg:gap-10 lg:content-start">
                    <div class="col-span-2 mb-6 border-b-2 border-black pb-6">
                        <p class="text-5xl font-newspaper-title text-center mb-4">Happy Birthday</p>
                        <p class="italic text-center text-lg mb-4 font-serif text-gray-700">"To the girl who doesn‚Äôt even realise how special she truly is..."</p>
                        <p class="first-letter:text-6xl first-letter:font-newspaper-title first-letter:float-left first-letter:mr-3 first-letter:mt-[-10px]">
                           Today isn‚Äôt just your birthday, it‚Äôs the day the universe quietly created someone who would one day change the world without even trying. You don‚Äôt have to do anything extraordinary‚Ä¶ your smile already does more than you can imagine. My only wish today is simple: May God keep you happy, peaceful and loved today and always.
                        </p>
                    </div>
                    <div class="lg:col-span-1 border-r border-gray-300 pr-6">
                        <h4 class="font-bold border-b border-black mb-2 uppercase tracking-widest text-sm font-sans">I. Why me?</h4>
                        <p class="text-sm mb-6">
                            I saw you with my heart, not my eyes, and trust me, you are the most beautiful person I have ever seen. You matter to me more than you think and more than I show. Every story begins with your smile and ends in your eyes.. I tried to describe you, but every metaphor fell short, even the stars felt ordinary when I looked into your eyes, and the moon hid behind the clouds when you walked through that door. Every poem I wrote ended up sounding like your name, how can I define someone who makes the universe feel small? You are not just beautiful, you are the reason why poetry exists. There may be billions, but none of them are you. If I had to pick between your happiness and mine, I‚Äôd choose yours without a second thought, because when you‚Äôre happy, I automatically become happy too. My relation with you isn‚Äôt like rain that comes and goes, it‚Äôs like air, always around you even when silent. You will always be loved by me, no matter what happens, in a world full of doubt, you‚Äôre the one I‚Äôm sure about. You‚Äôre special to me because you‚Äôre the only person I genuinely want to see happy from the bottom of my heart, and every time I look at you, something inside me whispers, ‚ÄúGod, please keep her happy at any cost.‚Äù I‚Äôve never felt this way for anyone before, that‚Äôs why you‚Äôll always be special. And I don‚Äôt love you for how you look, talk, or walk, I love you for your soul, your softness, calmness, and silent strength. That‚Äôs the part of you I fell for, and that‚Äôs the part no one else can replace.
                        </p>
                        <h4 class="font-bold border-b border-black mb-2 uppercase tracking-widest text-sm font-sans">II. You chose the wrong girl</h4>
                        <p class="text-sm mb-6">
                            No matter what you think about yourself, you are the sweetest, greatest, and most amazing person in my eyes. I‚Äôm glad I found you in this lifetime, in this chaos, in a world full of passing faces. You‚Äôre not just someone I met, you‚Äôre someone I feel safe with. When you‚Äôre near, the noise fades, time slows down, and everything feels right. You are the only one I always mention in my prayers. And if you think you‚Äôre the ‚Äúwrong girl,‚Äù let me tell you something‚Ä¶ you are not wrong, youre real. Youre genuine. Youre pure hearted. You feel deeply even when you hide it. You care silently even when you pretend you dont. You carry a softness inside you that the world rarely understands. People made you doubt yourself not because youre wrong, but because youre rare, and rare things are often misunderstood. Youre the girl who gives more than she receives, who holds pain but still smiles, who stays strong even when shes tired. You think youre ‚Äútoo much‚Äù or ‚Äúnot enough,‚Äù. I didnt choose you because youre perfect, I chose you because youre you and thats more than enough. I care about your heart, your soul, your silence, and your softness. Youre not the wrong girl youre the right one‚Ä¶ you just dont see it yet.
                        </p>
                    </div>
                    <div class="lg:col-span-1 pl-2">
                        <h4 class="font-bold border-b border-black mb-2 uppercase tracking-widest text-sm font-sans">III. You will find someone better?</h4>
                        <p class="text-sm mb-6">
                            Im not searching for ‚Äúbetter.‚Äù Im searching for you, your thoughts, your kindness, your calmness, your smile that makes even the hardest day feel lighter. ‚ÄúBetter‚Äù isnt a person; ‚ÄúBetter‚Äù is a feeling. And the feeling I get with you doesnt happen twice. Youre not replaceable. Not comparable. Not someone I can forget.
                        </p>

                        <h4 class="font-bold border-b border-black mb-2 uppercase tracking-widest text-sm font-sans">IV. Why you wait so long?</h4>
                        <p class="text-sm mb-6">
                            Waiting is the best part of any story, anticipation makes every moment more meaningful. When you truly love someone, you can wait for them without expectations or conditions. Love is not like ‚ÄúSubha jaha lander, samne Delhi , yeh nahi to koi aur sahi.‚Äù Thats not how love works. Love is like a dharma, a duty to care, to do good, and to never think bad, no matter the situation. Even Lord Krishna had to wait for Radha, so who am I? Just a normal person waiting for someone extraordinary. Ive seen you go quiet many times, your eyes still, thinking deeply, searching for answers. Your eyes speak more than your words ever could. If youre busy, Ill wait. If youre sad, Ill listen. If you need help, Ill be there. No matter what happens, youre never alone. I know I may not be perfect, but one thing is certain, I will never leave your side. If you need help, Ill be Doraemon, if you need a smile, Ill be Shinchan, if you need strength, Ill be Chhota Bheem, if youre bored, Ill be Jerry.
                        </p>

                        <h4 class="font-bold border-b border-black mb-2 uppercase tracking-widest text-sm font-sans">V. What do I want from you?</h4>
                        <p class="text-sm mb-6">
                            I dont want you to change a single thing about yourself. I dont ask for perfection, because your imperfections are what make you real. All I want is your time, your honesty, and your trust. I want to be the person you share your silence with. I want to be the one who makes you laugh when you want to cry. I just want you‚Äîyour happy days, your messy days, your tired days. Just be with me, and that is enough.
                        </p>

                        <h4 class="font-bold border-b border-black mb-2 uppercase tracking-widest text-sm font-sans">VI. My promise to you</h4>
                        <p class="text-sm mb-6">
                            I cant promise that life will always be easy, or that I can solve every problem. But I promise that you wont have to face any of it alone. I promise to be your calm in the storm, your safe place when the world gets too loud. I promise to respect you, cherish you, and remind you of your worth every single day. No matter where life takes us, my hand will always be holding yours.
                        </p>
                        <div class="border-2 border-black p-4 mt-6 bg-[#eae8e0]">
                            <p class="text-center font-bold italic font-serif-display text-base">
                                "At the end of everything, theres only one truth: Im grateful you exist. I will always pray for your happiness first. Thank you for being someone worth admiring, someone worth waiting for, someone who unknowingly made the world softer. Once again, Happy Birthday. You deserve every gentle, peaceful, beautiful thing in this world."
                            </p>
                        </div>
                    </div>
                </div>
                <p class="text-xs font-typewriter uppercase tracking-[0.2em] mt-4 font-bold">Proceed to Grand Finale</p>
            </div>
        `,
        wikiHtml: `
            <div class="space-y-4 text-justify">
                <div class="p-4 bg-[#f9f9f9] border border-[#eee] mb-6">
                    <p class="text-2xl font-serif text-center mb-2">Happy Birthday</p>
                    <p class="italic text-center text-gray-600 mb-4">"To the girl who doesn‚Äôt even realise how special she truly is..."</p>
                    <p class="leading-relaxed">
                       Today isn‚Äôt just your birthday, it‚Äôs the day the universe quietly created someone who would one day change the world without even trying. You don‚Äôt have to do anything extraordinary‚Ä¶ your smile already does more than you can imagine. My only wish today is simple: May God keep you happy, peaceful and loved today and always.
                    </p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                        <h4 class="font-bold border-b border-[#a2a9b1] mb-2">6.1 Why me?</h4>
                        <p class="text-sm mb-4">
                            I saw you with my heart, not my eyes, and trust me, you are the most beautiful person I have ever seen. You matter to me more than you think and more than I show. Every story begins with your smile and ends in your eyes.. I tried to describe you, but every metaphor fell short, even the stars felt ordinary when I looked into your eyes, and the moon hid behind the clouds when you walked through that door. Every poem I wrote ended up sounding like your name, how can I define someone who makes the universe feel small? You are not just beautiful, you are the reason why poetry exists. There may be billions, but none of them are you. If I had to pick between your happiness and mine, I‚Äôd choose yours without a second thought, because when you‚Äôre happy, I automatically become happy too. My relation with you isn‚Äôt like rain that comes and goes, it‚Äôs like air, always around you even when silent. You will always be loved by me, no matter what happens, in a world full of doubt, you‚Äôre the one I‚Äôm sure about. You‚Äôre special to me because you‚Äôre the only person I genuinely want to see happy from the bottom of my heart, and every time I look at you, something inside me whispers, ‚ÄúGod, please keep her happy at any cost.‚Äù I‚Äôve never felt this way for anyone before, that‚Äôs why you‚Äôll always be special. And I don‚Äôt love you for how you look, talk, or walk, I love you for your soul, your softness, calmness, and silent strength. That‚Äôs the part of you I fell for, and that‚Äôs the part no one else can replace.
                        </p>
                        
                        <h4 class="font-bold border-b border-[#a2a9b1] mb-2">6.2 The Hypothesis of Error</h4>
                        <p class="text-sm mb-4">
                            No matter what you think about yourself, you are the sweetest, greatest, and most amazing person in my eyes. I‚Äôm glad I found you in this lifetime, in this chaos, in a world full of passing faces. You‚Äôre not just someone I met, you‚Äôre someone I feel safe with. When you‚Äôre near, the noise fades, time slows down, and everything feels right. You are the only one I always mention in my prayers. And if you think you‚Äôre the ‚Äúwrong girl,‚Äù let me tell you something‚Ä¶ you are not wrong, youre real. Youre genuine. Youre pure hearted. You feel deeply even when you hide it. You care silently even when you pretend you dont. You carry a softness inside you that the world rarely understands. People made you doubt yourself not because youre wrong, but because youre rare, and rare things are often misunderstood. Youre the girl who gives more than she receives, who holds pain but still smiles, who stays strong even when shes tired. You think youre ‚Äútoo much‚Äù or ‚Äúnot enough,‚Äù. I didnt choose you because youre perfect, I chose you because youre you and thats more than enough. I care about your heart, your soul, your silence, and your softness. Youre not the wrong girl youre the right one‚Ä¶ you just dont see it yet.
                        </p>
                    </div>
                    
                    <div>
                        <h4 class="font-bold border-b border-[#a2a9b1] mb-2">6.3 Comparative Analysis</h4>
                        <p class="text-sm mb-4">
                            Im not searching for ‚Äúbetter.‚Äù Im searching for you, your thoughts, your kindness, your calmness, your smile that makes even the hardest day feel lighter. ‚ÄúBetter‚Äù isnt a person; ‚ÄúBetter‚Äù is a feeling. And the feeling I get with you doesnt happen twice. Youre not replaceable. Not comparable. Not someone I can forget.
                        </p>

                        <h4 class="font-bold border-b border-[#a2a9b1] mb-2">6.4 The Wait</h4>
                        <p class="text-sm mb-4">
                            Waiting is the best part of any story, anticipation makes every moment more meaningful. When you truly love someone, you can wait for them without expectations or conditions. Love is not like ‚ÄúSubha jaha lander, samne Delhi , yeh nahi to koi aur sahi.‚Äù Thats not how love works. Love is like a dharma, a duty to care, to do good, and to never think bad, no matter the situation. Even Lord Krishna had to wait for Radha, so who am I? Just a normal person waiting for someone extraordinary. Ive seen you go quiet many times, your eyes still, thinking deeply, searching for answers. Your eyes speak more than your words ever could. If youre busy, Ill wait. If youre sad, Ill listen. If you need help, Ill be there. No matter what happens, youre never alone. I know I may not be perfect, but one thing is certain, I will never leave your side. If you need help, Ill be Doraemon, if you need a smile, Ill be Shinchan, if you need strength, Ill be Chhota Bheem, if youre bored, Ill be Jerry.
                        </p>

                        <h4 class="font-bold border-b border-[#a2a9b1] mb-2">6.5 Requirements</h4>
                        <p class="text-sm mb-4">
                            I dont want you to change a single thing about yourself. I dont ask for perfection, because your imperfections are what make you real. All I want is your time, your honesty, and your trust. I want to be the person you share your silence with. I want to be the one who makes you laugh when you want to cry. I just want you‚Äîyour happy days, your messy days, your tired days. Just be with me, and that is enough.
                        </p>

                        <h4 class="font-bold border-b border-[#a2a9b1] mb-2">6.6 The Promise</h4>
                        <p class="text-sm mb-4">
                            I cant promise that life will always be easy, or that I can solve every problem. But I promise that you wont have to face any of it alone. I promise to be your calm in the storm, your safe place when the world gets too loud. I promise to respect you, cherish you, and remind you of your worth every single day. No matter where life takes us, my hand will always be holding yours.
                        </p>
                        
                        <div class="border border-[#a2a9b1] bg-[#f8f9fa] p-4 mt-6">
                            <p class="text-center italic text-sm">
                                "At the end of everything, theres only one truth: Im grateful you exist. I will always pray for your happiness first. Thank you for being someone worth admiring, someone worth waiting for, someone who unknowingly made the world softer. Once again, Happy Birthday. You deserve every gentle, peaceful, beautiful thing in this world."
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        `,
        buttonText: "See Final Surprise",
        callback: () => { cards[6].isLocked = false; }
    },
];

function unlockCurrentCard() {
    // Only used for mobile flow logic
    cards[currentCardIndex].isLocked = false;
    const button = document.getElementById('next-button');
    if (button) {
        button.disabled = false;
        button.classList.remove('opacity-50', 'cursor-not-allowed');
    }
}

// Function to render the full desktop article at once
function renderDesktopWiki() {
    const container = document.getElementById('wiki-sections-container');
    container.innerHTML = ''; // Clear previous content if any

    cards.forEach((card, index) => {
        // Skip the "Access Granted" transition card on desktop
        if (card.desktopTitle === null) return;

        // Create Section Header
        const h2 = document.createElement('h2');
        h2.id = `section-${index}`;
        h2.className = "mw-headline";
        h2.innerHTML = `${card.desktopTitle} <span class="text-sm font-normal ml-2">[<a href="#" class="text-[#0645ad]">edit</a>]</span>`;
        
        // Create Body Div
        const div = document.createElement('div');
        div.className = "mt-4 mb-8 text-[#202122]";
        div.innerHTML = card.wikiHtml;

        container.appendChild(h2);
        container.appendChild(div);
    });

    // Initialize interactive elements after injection
    setTimeout(() => {
        initializeTicTacToe();
        initializeWordCard();
    }, 100);
}

function renderCard(index) {
    const isDesktop = window.innerWidth >= 1024;

    if (isDesktop) {
        // Only render once if not already rendered or if needed
        if(document.getElementById('wiki-sections-container').children.length === 0) {
            renderDesktopWiki();
        }
    } else {
        // Mobile Card Logic
        const contentDiv = document.getElementById('card-content');
        const button = document.getElementById('next-button');
        const mainCard = document.getElementById('main-card');
        const card = cards[index];

        mainCard.style.opacity = '0';
        setTimeout(() => {
            document.getElementById('card-title-header').textContent = card.title;
            contentDiv.innerHTML = card.mobileHtml;
            button.textContent = card.buttonText;
            button.onclick = () => handleNext(index);
            
            // Execute callback for specific cards (e.g. init TicTacToe)
            if (card.callback) card.callback();
            
            if (card.isLocked) {
                button.disabled = true;
                button.classList.add('opacity-50', 'cursor-not-allowed');
            } else {
                button.disabled = false;
                button.classList.remove('opacity-50', 'cursor-not-allowed');
            }
            mainCard.style.opacity = '1';
        }, 300);
    }
}

function handleNext(currentIndex) {
    const nextIndex = currentIndex + 1;
    if (nextIndex < cards.length) {
        currentCardIndex = nextIndex;
        renderCard(currentCardIndex);
    } else {
        window.finalShowdown();
    }
}

function initializeTicTacToe() {
    const grid = document.getElementById('tictactoe-grid');
    if(!grid) return; 
    
    const status = document.getElementById('game-status');
    const message = document.getElementById('card-msg-1');
    const restartBtn = document.getElementById('restart-game-btn');
    
    if(restartBtn) restartBtn.classList.add('hidden');
    if(message) message.classList.add('hidden');
    if(status) status.innerHTML = "Your move";

    let board = ["", "", "", "", "", "", "", "", ""];
    let gameActive = true;
    const winningConditions = [
        [0, 1, 2], [3, 4, 5], [6, 7, 8], [0, 3, 6], [1, 4, 7], [2, 5, 8], [0, 4, 8], [2, 4, 6]
    ];

    const handleCellPlayed = (clickedCell, clickedCellIndex) => {
        board[clickedCellIndex] = "X";
        clickedCell.innerHTML = 'X';
    };

    const handleResultValidation = () => {
        let roundWon = false;
        let winningPlayer = '';
        
        for (let i = 0; i < winningConditions.length; i++) {
            const winCondition = winningConditions[i];
            let a = board[winCondition[0]];
            let b = board[winCondition[1]];
            let c = board[winCondition[2]];
            if (a === '' || b === '' || c === '') continue;
            if (a === b && b === c) {
                roundWon = true; 
                winningPlayer = a;
                break;
            }
        }

        if (roundWon) {
            gameActive = false;
            if (winningPlayer === 'X') {
                status.innerHTML = `You Win!`;
                if(message) message.classList.remove('hidden');
                // Unlock mobile button if on mobile
                if (window.innerWidth < 1024) unlockCurrentCard();
            } else {
                status.innerHTML = `You Lost! Restarting...`;
                setTimeout(initializeTicTacToe, 1500); 
            }
            return true;
        }

        if (!board.includes("")) {
            status.innerHTML = `It's a Draw! Restarting...`;
            gameActive = false;
            setTimeout(initializeTicTacToe, 1500);
            return true;
        }
        
        return false;
    };

    const handleCellClick = (e) => {
        const clickedCell = e.target;
        const clickedCellIndex = parseInt(clickedCell.dataset.index);
        if (board[clickedCellIndex] !== "" || !gameActive) return;
        handleCellPlayed(clickedCell, clickedCellIndex);
        if (!handleResultValidation()) {
            setTimeout(handleAIClick, 500);
        }
    };
    
    const handleAIClick = () => {
        if (!gameActive) return;
        let move = -1;
        let emptyIndices = board.map((val, idx) => val === "" ? idx : -1).filter(idx => idx !== -1);
        if (emptyIndices.length > 0) move = emptyIndices[Math.floor(Math.random() * emptyIndices.length)];

        if (move !== -1 && board[move] === "") {
            const cell = document.querySelector(`.cell[data-index="${move}"]`);
            board[move] = "O";
            cell.innerHTML = 'O';
            cell.classList.add('O'); 
            handleResultValidation();
        }
    }

    grid.querySelectorAll('.cell').forEach(cell => {
        cell.innerHTML = "";
        cell.classList.remove('O');
        cell.replaceWith(cell.cloneNode(true)); 
    });
    
    document.querySelectorAll('#tictactoe-grid .cell').forEach(cell => {
         cell.addEventListener('click', handleCellClick, { once: true });
    });
}

function initializeWordCard() {
    window.chooseWord = (word) => {
        const status = document.getElementById('word-status');
        if(status) {
            status.textContent = `You chose '${word}'. A beautiful choice, just like you.`;
            status.classList.remove('hidden');
        }
        // Unlock mobile button if on mobile
        if (window.innerWidth < 1024) unlockCurrentCard();
    };
}

window.finalShowdown = function() {
    clearInterval(symbolInterval);
    document.querySelectorAll('.float-symbol').forEach(el => el.remove());

    document.getElementById('mobile-view-wrapper').classList.add('hidden');
    document.getElementById('desktop-wiki-view').classList.add('hidden');
    
    document.body.style.transition = 'background-color 1.5s ease';
    document.body.style.backgroundColor = '#000000'; 
    
    setTimeout(() => {
        const finalDisplayElements = document.getElementById('final-display-elements');
        finalDisplayElements.classList.remove('hidden');
        setTimeout(() => {
            finalDisplayElements.style.opacity = '1';
        }, 100); 
        const fireworksCanvas = document.getElementById('fireworks-canvas');
        fireworksCanvas.classList.remove('hidden');
        resizeCanvas();
        running = true;
        setTimeout(() => { loop(); }, 1500); 
    }, 1000); 
}

function resizeCanvas() {
    const fireworksCanvas = document.getElementById('fireworks-canvas');
    fireworksCanvas.width = window.innerWidth;
    fireworksCanvas.height = window.innerHeight;
}
function Particle(x, y, color) {
    this.x = x; this.y = y; this.color = color;
    this.velocity = { x: Math.random() * 6 - 3, y: Math.random() * 6 - 3 };
    this.alpha = 1; this.friction = 0.98; this.gravity = 0.08;
    this.radius = Math.random() * 3 + 1;
}
Particle.prototype.update = function() {
    this.velocity.x *= this.friction; this.velocity.y *= this.friction;
    this.velocity.y += this.gravity; this.x += this.velocity.x;
    this.y += this.velocity.y; this.alpha -= 0.015;
    if (this.alpha < 0) this.alpha = 0;
}
Particle.prototype.draw = function() {
    const ctx = document.getElementById('fireworks-canvas').getContext('2d');
    ctx.save(); ctx.beginPath();
    ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false);
    ctx.fillStyle = this.color; ctx.globalAlpha = this.alpha;
    ctx.fill(); ctx.restore();
}
function createFirework(x, y, color) {
    for (let i = 0; i < 60; i++) { particles.push(new Particle(x, y, color)); }
}
let particles = [];
let running = false;
function loop() {
    if (!running) return;
    const fireworksCanvas = document.getElementById('fireworks-canvas');
    const ctx = fireworksCanvas.getContext('2d');
    ctx.fillStyle = 'rgba(0, 0, 0, 0.08)'; 
    ctx.fillRect(0, 0, fireworksCanvas.width, fireworksCanvas.height);
    for (let i = particles.length - 1; i >= 0; i--) {
        let p = particles[i]; p.update(); p.draw();
        if (p.alpha <= 0 || p.y > fireworksCanvas.height) particles.splice(i, 1);
    }
    if (particles.length < 500 && Math.random() < 0.06) { 
        const x = Math.random() * fireworksCanvas.width;
        const y = Math.random() * fireworksCanvas.height * 0.7;
        const color = `hsl(${Math.random() * 360}, 100%, 65%)`;
        createFirework(x, y, color);
    }
    requestAnimationFrame(loop);
}

let areNavsOpen = false;
const navPanels = {
    top: document.getElementById('topNav'),
    bottom: document.getElementById('bottomNav'),
    left: document.getElementById('leftNav'),
    right: document.getElementById('rightNav')
};
const navToggle = document.getElementById('navToggle');
const navToggleIcon = document.getElementById('navToggleIcon');
const navToggleX = document.getElementById('navToggleX');

function openAllNavs() {
    navPanels.top.classList.remove('-translate-y-full');
    navPanels.bottom.classList.remove('translate-y-full');
    navPanels.left.classList.remove('-translate-x-full');
    navPanels.right.classList.remove('translate-x-full');
    document.body.classList.add('navs-open');
    navToggleIcon.classList.add('hidden');
    navToggleX.classList.remove('hidden');
    areNavsOpen = true;
}
window.closeAllNavs = function() {
    navPanels.top.classList.add('-translate-y-full');
    navPanels.bottom.classList.add('translate-y-full');
    navPanels.left.classList.add('-translate-x-full');
    navPanels.right.classList.add('translate-x-full');
    document.body.classList.remove('navs-open');
    navToggleIcon.classList.remove('hidden');
    navToggleX.classList.add('hidden');
    areNavsOpen = false;
}
function toggleAllNavs(e) {
    if (e) e.stopPropagation(); 
    if (areNavsOpen) window.closeAllNavs(); else openAllNavs();
}

function startFloatingSymbols() {
    if (symbolInterval) return;
    
    const symbols = ['*', '‚Ä†', '‚Ä°', '¬ß', '‚ú¶', '‚úß', '‚Ä¢', '¬∑', '+'];
    const createSymbol = () => {
        const symbol = document.createElement('div');
        symbol.innerHTML = symbols[Math.floor(Math.random() * symbols.length)];
        symbol.classList.add('float-symbol');
        symbol.style.left = `${Math.random() * 100}vw`;
        const duration = 10 + Math.random() * 5; 
        symbol.style.animationDuration = `${duration}s`;
        document.body.appendChild(symbol);
        setTimeout(() => { symbol.remove(); }, duration * 1000); 
    };
    symbolInterval = setInterval(createSymbol, 800);
}

function stopFloatingSymbols() {
    if (symbolInterval) {
        clearInterval(symbolInterval);
        symbolInterval = null;
    }
    // Remove existing symbols
    document.querySelectorAll('.float-symbol').forEach(el => el.remove());
}

document.addEventListener('DOMContentLoaded', () => {
    // Initial check
    if (window.innerWidth < 1024) {
        startFloatingSymbols();
        renderCard(currentCardIndex);
    } else {
        renderDesktopWiki();
    }

    navToggle.addEventListener('click', toggleAllNavs);

    // Close navs when clicking outside
    document.addEventListener('click', (e) => {
        if (areNavsOpen && !e.target.closest('.nav-panel') && !e.target.closest('#navToggle')) {
            window.closeAllNavs();
        }
    });
    
    window.addEventListener('resize', () => {
        const isDesktop = window.innerWidth >= 1024;
        
        if (isDesktop) {
            stopFloatingSymbols();
            if(document.getElementById('wiki-sections-container').children.length === 0) {
                renderDesktopWiki();
            }
        } else {
            startFloatingSymbols();
            renderCard(currentCardIndex);
        }
    });
});
</script>
</body>
</html>
